services:
  proxy:
    container_name: proxy
    init: true
    env_file:
      - .env
    build: 
      context: backend/proxy
    networks:  
      - transcendence
    ports:
      - 8080:8080
    volumes:
      - ./backend/proxy/data:/data
      - ./backend/shared/:/data/src/shared:ro
      - ./frontend/:/frontend
    restart: always
    
  authenticate:
    container_name: authenticate
    init: true
    env_file:
      - .env
    build: 
      context: backend/authenticate
    expose:
      - 3000
    networks:  
      - transcendence
    volumes:
      - ./backend/authenticate/data:/data
      - ./backend/shared/:/data/src/shared:ro
    restart: always
  
  user:
    container_name: user
    init: true
    env_file:
      - .env
    build:
      context: backend/user
    expose:
      - 3000
    networks:  
      - transcendence
    volumes:
      - ./backend/user/data:/data
      - ./backend/shared/:/data/src/shared:ro
    restart: always
  
  game:
    container_name: game
    init: true
    env_file:
      - .env
    build:
      context: backend/game
    expose:
      - 3000
    networks:  
      - transcendence
    volumes:
      - ./backend/game/data:/data
      - ./backend/shared/:/data/src/shared:ro
    restart: always
  database:
    container_name: database
    init: true
    env_file:
      - .env
    build:
      context: backend/database
    expose:
      - 3000
    networks:  
      - transcendence
    volumes:
      - ./backend/database/data:/data
      - ./backend/shared/:/data/src/shared:ro
    restart: always

  frontend:
    container_name: frontend
    init: true
    env_file:
      - .env
    build:
      context: frontend
    expose:
      - 3000
    networks:  
      - transcendence
    volumes:
      - ./frontend/data:/data
      - ./backend/shared/with_front/:/data/src/shared:ro
    restart: always


networks:
  transcendence:
    driver: bridge